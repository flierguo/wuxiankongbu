---
inclusion: always
---
<!------------------------------------------------------------------------------------
   Add rules to this file or a short description and have Kiro refine them for you.
   
   Learn about inclusion modes: https://kiro.dev/docs/steering/#inclusion-modes
-------------------------------------------------------------------------------------> 

# 无限恐怖项目规则

## 项目特性

- 项目是大数值游戏项目，会频繁调用大数值运算
- 引擎自身支持最大999京的数值，超过的数值都需要字符运算
- 引用 `大数值/核心计算方法` 中的智能计算函数来进行运算

## 性能要求

- 代码需要以降低CPU单核占用为基础
- 高频调用的部分一定要优化性能
- 使用计数器而非时间函数来计算时间间隔

## API参考

- 每次添加及更改代码需读取及参考 `91M2说明书` 文件夹内的代码说明和示例及API，防止出错
- 所有API调用都可以在 91M2说明书 文件夹内查看

## 相关规则

- 定时器使用规则：参考 `定时器规则.md`
- 代码格式规范：参考 `代码格式规范.md`

## 代码删除安全规则

- **禁止使用 editCode 的 delete_node 操作删除函数**，该操作在中文函数名场景下会误删大量无关代码，导致整个文件被清空
- 删除函数/代码块时，必须使用 `strReplace` 工具，将目标代码精确替换为空字符串
- 删除前必须先用 `grepSearch` 确认该函数/导出没有被其他文件引用
- 每次删除操作后，立即用 `getDiagnostics` 检查被修改文件及所有引用方文件
- 批量删除时，每删一个函数就验证一次，不要一次性删除多个后再验证
- 如果一个文件需要删除多个函数，优先使用 `readFile` 读取完整内容，手动剔除目标函数后用 `fsWrite` 重写整个文件，这比逐个 delete_node 更安全

