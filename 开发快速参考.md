# å¼€å‘å¿«é€Ÿå‚è€ƒå¡ç‰‡

## ğŸš¨ å¸¸è§é”™è¯¯é€ŸæŸ¥

### âŒ å®šæ—¶å™¨é”™è¯¯
```typescript
// é”™è¯¯ - ä¸è¦ä½¿ç”¨
setTimeout(() => {}, 1000);
setInterval(() => {}, 5000);
```

### âœ… å®šæ—¶å™¨æ­£ç¡®ç”¨æ³•
```typescript
// æ­£ç¡® - ä½¿ç”¨RobotManageNpc
export function _A_second(Npc: TNormNpc, Player: TPlayObject, Args: TArgs): void {
    // æ¯ç§’æ‰§è¡Œ
}

export function _Ten_seconds(Npc: TNormNpc, Player: TPlayObject, Args: TArgs): void {
    // æ¯10ç§’æ‰§è¡Œ
}

export function æ¯åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡(Npc: TNormNpc, Player: TPlayObject, Args: TArgs): void {
    // æ¯åˆ†é’Ÿæ‰§è¡Œ
}
```

---

### âŒ APIè°ƒç”¨é”™è¯¯
```typescript
// é”™è¯¯ - ä¸å­˜åœ¨çš„æ–¹æ³•
GameLib.GetPlayerCount();
GameLib.GetOnlineCount();
```

### âœ… APIè°ƒç”¨æ­£ç¡®ç”¨æ³•
```typescript
// æ­£ç¡® - ä½¿ç”¨æ­£ç¡®çš„æ–¹æ³•
try {
    const count = GameLib.GetPlayCount() || 0;
} catch (error) {
    console.log('è·å–å¤±è´¥:', error);
    const count = 0; // é»˜è®¤å€¼
}
```

---

### âŒ UIç»„ä»¶åç§°é”™è¯¯
```typescript
// é”™è¯¯ - åŒ…å«emojiå’ŒåŠ¨æ€æ•°æ®
GameLib.AdminUI.AddButton('é¡µé¢', 'â–¶ å¯åŠ¨ç³»ç»Ÿ', 'æç¤º');
GameLib.AdminUI.AddButton('é¡µé¢', 'ç³»ç»ŸçŠ¶æ€: æ­£å¸¸', 'æç¤º');
GameLib.AdminUI.AddEdit('é¡µé¢', 'ç›‘æ§é—´éš”(ç§’)', '5', 'æç¤º');
```

### âœ… UIç»„ä»¶åç§°æ­£ç¡®ç”¨æ³•
```typescript
// æ­£ç¡® - çº¯æ–‡æœ¬é™æ€åç§°
GameLib.AdminUI.AddButton('é¡µé¢', 'å¯åŠ¨ç³»ç»Ÿ', 'å¯åŠ¨æ ¸å¿ƒè¿è¡Œç›‘æ§');
GameLib.AdminUI.AddButton('é¡µé¢', 'ç³»ç»ŸçŠ¶æ€', 'å½“å‰ç³»ç»Ÿè¿è¡ŒçŠ¶æ€');
GameLib.AdminUI.AddEdit('é¡µé¢', 'ç›‘æ§é—´éš”', '5', 'è®¾ç½®ç›‘æ§æ•°æ®æ›´æ–°é—´éš”(ç§’)');
```

---

## ğŸ“‹ å¸¸ç”¨APIé€ŸæŸ¥è¡¨

| åŠŸèƒ½ | æ­£ç¡®API | é”™è¯¯API |
|------|---------|---------|
| è·å–ç©å®¶æ•°é‡ | `GameLib.GetPlayCount()` | `GameLib.GetPlayerCount()` |
| è·å–æœåŠ¡å™¨å | `GameLib.ServerName` | - |
| è·å–æ—¶é—´æˆ³ | `GameLib.TickCount` | `Date.now()` |
| é‡è½½è„šæœ¬ | `GameLib.ReLoadScriptEngine()` | - |

---

## ğŸ› ï¸ å®‰å…¨è°ƒç”¨æ¨¡å¼

### æ ‡å‡†é”™è¯¯å¤„ç†
```typescript
function safeCall<T>(apiCall: () => T, defaultValue: T): T {
    try {
        return apiCall();
    } catch (error) {
        console.log('è°ƒç”¨å¤±è´¥:', error);
        return defaultValue;
    }
}

// ä½¿ç”¨
const count = safeCall(() => GameLib.GetPlayCount(), 0);
```

### å‡½æ•°å­˜åœ¨æ€§æ£€æŸ¥
```typescript
if (typeof å‡½æ•°å === 'function') {
    try {
        å‡½æ•°å();
    } catch (error) {
        console.log('å‡½æ•°è°ƒç”¨å¤±è´¥:', error);
    }
} else {
    console.log('å‡½æ•°ä¸å­˜åœ¨');
}
```

### å®‰å…¨å±æ€§è®¿é—®
```typescript
const value = obj && obj.property !== undefined ? obj.property : defaultValue;
```

---

## âš¡ å¿«é€Ÿæ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰å¿…æ£€
- [ ] æ²¡æœ‰ä½¿ç”¨`setTimeout`/`setInterval`
- [ ] ä½¿ç”¨`GameLib.GetPlayCount()`è€Œä¸æ˜¯`GetPlayerCount()`
- [ ] UIç»„ä»¶åç§°ä¸åŒ…å«emojiæˆ–ç‰¹æ®Šå­—ç¬¦
- [ ] æ‰€æœ‰å¯¼å…¥çš„å‡½æ•°éƒ½å­˜åœ¨
- [ ] æ·»åŠ äº†try-catché”™è¯¯å¤„ç†
- [ ] æä¾›äº†é»˜è®¤å€¼

### å¸¸è§é—®é¢˜
- **å®šæ—¶å™¨ä¸å·¥ä½œ** â†’ æ£€æŸ¥æ˜¯å¦ç”¨äº†`setTimeout`
- **APIè°ƒç”¨å¤±è´¥** â†’ æ£€æŸ¥æ–¹æ³•åæ˜¯å¦æ­£ç¡®
- **UIç»„ä»¶é”™è¯¯** â†’ æ£€æŸ¥åç§°æ˜¯å¦åŒ…å«emoji
- **å‡½æ•°è°ƒç”¨å¤±è´¥** â†’ æ£€æŸ¥å‡½æ•°æ˜¯å¦å­˜åœ¨

---

## ğŸ¯ è®°ä½è¿™äº›è§„åˆ™

1. **å®šæ—¶å™¨** â†’ åªç”¨RobotManageNpcå‡½æ•°
2. **APIè°ƒç”¨** â†’ æ€»æ˜¯åŠ try-catch
3. **UIç»„ä»¶** â†’ åªç”¨çº¯æ–‡æœ¬åç§°
4. **å‡½æ•°è°ƒç”¨** â†’ å…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨
5. **é”™è¯¯å¤„ç†** â†’ æä¾›é»˜è®¤å€¼

---

ğŸ’¡ **æç¤º**: é‡åˆ°é—®é¢˜æ—¶ï¼Œå…ˆæ£€æŸ¥è¿™ä¸ªå¿«é€Ÿå‚è€ƒå¡ç‰‡ï¼