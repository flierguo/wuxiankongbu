/**
 * 神器配置中心
 * 统一管理所有神器套装和单件数据
 */

// ==================== 类型定义 ====================

/** 神器套装数据结构 */
export interface 神器套装数据 {
    套装名称: string;
    单件属性: string[];      // 每个组件的属性加成（用于UI显示）
    单件属性值: number;      // 全体魔次加成数值（用于计算）
    套装属性: string[];      // 全套激活效果（用于UI显示）
    套装属性类型: '爆率' | '回收' | '阶数' | '基因锁' | '无';
    套装属性值: number | string;
    套装阶数目标?: string[]; // 阶数类型时的目标属性
    来源: string;
    组件列表: string[];
}

/** 特殊单件数据结构 */
export interface 特殊单件数据 {
    组件名称: string;
    属性描述: string[];      // 该单件的属性描述
    属性值: number;          // 全体魔次加成数值
    来源: string;
}

// ==================== 套装配置 ====================

export const 神器套装配置: 神器套装数据[] = [
    {
        套装名称: "蜂巢生存套",
        单件属性: ["全体技能魔次提高 200"],
        单件属性值: 200,
        套装属性: ["爆率提高 100%"],
        套装属性类型: '爆率',
        套装属性值: 100,
        来源: "蜂巢深层探索掉落",
        组件列表: ["蜂巢门禁卡", "荧光战术灯", "多功能工兵铲", "便携氧气罐", "伤口应急喷", "声波探测器", "防水战术包"]
    },
    {
        套装名称: "丧尸近战套",
        单件属性: ["全体技能魔次提高 200"],
        单件属性值: 200,
        套装属性: ["回收倍率提高 200%"],
        套装属性类型: '回收',
        套装属性值: 200,
        来源: "丧尸巢穴BOSS掉落",
        组件列表: ["锰钢斩尸刀", "高压电击棍", "战术护臂腿", "脚挂式飞斧", "负重格斗靴", "速干止血带", "战术钢指虎", "气味屏蔽剂"]
    },
    {
        套装名称: "舔食远程套",
        单件属性: ["全体技能魔次提高 1000"],
        单件属性值: 1000,
        套装属性: ["狂化 丶 融合 等级 + 2"],
        套装属性类型: '阶数',
        套装属性值: 2,
        套装阶数目标: ['狂化阶数', '融合阶数'],
        来源: "舔食者狩猎任务奖励",
        组件列表: ["改装弩箭枪", "穿甲爆破箭", "红外瞄准镜", "震动感应雷", "神经烟雾弹", "便携弹药包"]
    },
    {
        套装名称: "病毒研究套",
        单件属性: ["全体技能魔次提高 1000"],
        单件属性值: 1000,
        套装属性: ["迅疾 丶 念力 等级 + 2"],
        套装属性类型: '阶数',
        套装属性值: 2,
        套装阶数目标: ['迅疾阶数', '念力阶数'],
        来源: "保护伞公司实验室",
        组件列表: ["病毒样本管", "便携测序仪", "抗体催化剂", "病毒检测仪", "轻型防护服", "数据存储盘", "PH调节原液"]
    },
    {
        套装名称: "应急逃生套",
        单件属性: ["全体技能魔次提高 1000"],
        单件属性值: 1000,
        套装属性: ["甲壳 丶 协作 等级 + 2"],
        套装属性类型: '阶数',
        套装属性值: 2,
        套装阶数目标: ['甲壳阶数', '协作阶数'],
        来源: "逃生挑战副本奖励",
        组件列表: ["破片手雷弹", "绳索钩爪枪", "烟雾掩护弹", "应急信号枪", "多功能工具钳", "高浓缩能量棒", "备用电池组", "团队通讯耳"]
    },
    {
        套装名称: "团队支援套",
        单件属性: ["全体技能魔次提高 2000"],
        单件属性值: 2000,
        套装属性: ["解锁基因锁一阶", "对2大陆及以上的所有怪增伤 10000%"],
        套装属性类型: '基因锁',
        套装属性值: '10000',
        来源: "团队副本通关奖励",
        组件列表: ["医疗急救箱", "蜂巢战术图", "生命监测仪", "临时强化针", "丧尸诱饵弹", "主神兑换券"]
    }
];

// ==================== 特殊单件配置 ====================

export const 特殊单件配置: 特殊单件数据[] = [
    {
        组件名称: "GM的馈赠",
        属性描述: ["使你的鞭尸次数 + 1 "],
        属性值: 1,
        来源: "特殊活动奖励,或者联系客服"
    },
    {
        组件名称: "FAFA的定制",
        属性描述: ["全体技能魔次提高 10000"],
        属性值: 10000,
        来源: "私人冠名物品!!!"
    },
    {
        组件名称: "大佬的淫威",
        属性描述: ["使你的 暗影袭杀 技能范围 + 5"],
        属性值: 5,
        来源: "联系客服"
    },
    {
        组件名称: "赛博朋克的觉醒",
        属性描述: ["使你的 狂化 技能等级 + 1"],
        属性值: 1,
        来源: "联系客服"
    },
    {
        组件名称: "永动机的奥秘",
        属性描述: ["使你的 所有技能等级 + 100%"],
        属性值: 1,
        来源: "联系客服"
    },
    {
        组件名称: "无限恐怖的支配",
        属性描述: ["使你的 爆率额外 + 100"],
        属性值: 100,
        来源: "专区专属物品"
    },
];

// ==================== 映射表（预计算优化） ====================

/** 组件名称到套装的映射 */
export const 组件套装映射 = new Map<string, 神器套装数据>();
for (const 套装 of 神器套装配置) {
    for (const 组件 of 套装.组件列表) {
        组件套装映射.set(组件, 套装);
    }
}

/** 特殊单件名称映射 */
export const 特殊单件映射 = new Map<string, 特殊单件数据>();
for (const 单件 of 特殊单件配置) {
    特殊单件映射.set(单件.组件名称, 单件);
}

// ==================== 工具函数 ====================

/**
 * 判断组件是否为特殊单件
 */
export function 是特殊单件(组件名称: string): boolean {
    return 特殊单件映射.has(组件名称);
}

/**
 * 获取组件所属套装（如果是套装组件）
 */
export function 获取组件套装(组件名称: string): 神器套装数据 | undefined {
    return 组件套装映射.get(组件名称);
}

/**
 * 获取特殊单件数据
 */
export function 获取特殊单件(组件名称: string): 特殊单件数据 | undefined {
    return 特殊单件映射.get(组件名称);
}
