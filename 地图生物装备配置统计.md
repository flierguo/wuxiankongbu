# 地图信息、生物属性和装备掉落配置统计

## 📋 目录
1. [地图配置系统](#地图配置系统)
2. [生物属性系统](#生物属性系统)
3. [装备掉落系统](#装备掉落系统)
4. [快速修改指南](#快速修改指南)

---

## 🗺️ 地图配置系统

### 核心配置文件
**文件位置**: `_核心部分/世界配置.ts`

### 地图配置表 (`完整地图配置`)
所有地图的核心配置都在 `完整地图配置` 数组中，包含以下信息：

| 地图名 | 地图等级 | 固定星级 | 需求等级 | 生物强度倍数 | 装备属性倍数 |
|--------|----------|----------|----------|--------------|--------------|
| 新手地图 | 1 | 1 | 1 | 1 | 1 |
| 浣熊市 | 100 | 101 | 1 | 1 | 1 |
| 蜂巢入口 | 200 | 102 | 50 | 2 | 1.5 |
| 病毒研究室 | 300 | 103 | 100 | 4 | 2 |
| 生化实验室 | 400 | 104 | 150 | 8 | 3 |
| 激光走廊 | 500 | 105 | 200 | 16 | 4 |
| 红后控制室 | 600 | 106 | 250 | 32 | 5 |

### 难度系统
地图支持多种难度，通过地图显示名识别：

| 难度名称 | 难度倍数 | 说明 |
|----------|----------|------|
| 简单 | 1 | 基础难度 |
| 普通 | 10 | 10倍难度 |
| 困难 | 100 | 100倍难度 |
| 精英 | 1000 | 1000倍难度 |
| 炼狱 | 10000 | 10000倍难度 |
| 圣耀 | 100000 | 100000倍难度 |

### 锚点系统
锚点系统用于计算生物强度：
- **公式**: `生物强度倍数 = 2^(锚点等级-1) * 自定义倍数 * 难度倍数`
- **锚点等级**: `Math.floor(地图等级 / 100) + 1`

---

## 👾 生物属性系统

### 核心配置文件
**文件位置**: `_核心部分/_生物/生物属性.ts`

### 生物类型配置 (`生物配置表`)

#### 1. TAG类型 (怪物类型)
| TAG | 类型名称 | 刷新比例 | 难度系数 | 经验倍数 | 爆率倍数 |
|-----|----------|----------|----------|----------|----------|
| 1 | 基础小怪 | 50% | 1 | 1 | 1 |
| 2 | 挑战小怪 | 25% | 5 | 3 | 1 |
| 3 | 稀有怪物 | 15% | 25 | 15 | 1 |
| 4 | 精英怪物 | 8% | 125 | 45 | 1 |
| 5 | 首领怪物 | 2% | 625 | 135 | 2 |
| 6 | 大陆BOSS | 0.5% | 5000 | 500 | 3 |
| 7 | 特殊BOSS | 特殊刷新 | 50000 | 1000 | 5 |

#### 2. 生物基础属性配置

**TAG 1 - 基础小怪**:
- 血量基础: 100
- 攻击基础: 10
- 防御基础: 5
- 装备基础: 1

**TAG 2 - 挑战小怪**:
- 血量基础: 1,500
- 攻击基础: 40
- 防御基础: 20
- 装备基础: 4

**TAG 3 - 稀有怪物**:
- 血量基础: 20,000
- 攻击基础: 200
- 防御基础: 100
- 装备基础: 20

**TAG 4 - 精英怪物**:
- 血量基础: 300,000
- 攻击基础: 750
- 防御基础: 250
- 装备基础: 75

**TAG 5 - 首领怪物**:
- 血量基础: 1,500,000
- 攻击基础: 3,750
- 防御基础: 1,250
- 装备基础: 375

**TAG 6 - 大陆BOSS**:
- 血量基础: 30,000,000
- 攻击基础: 18,750
- 防御基础: 6,250
- 装备基础: 1,875

**TAG 7 - 特殊BOSS**:
- 血量基础: 100,000,000
- 攻击基础: 187,500
- 防御基础: 62,500
- 装备基础: 18,750

### 属性计算公式
```typescript
最终属性 = 基础值 * 生物强度倍数 * 星级难度倍数 * 地图等级倍数 * TAG倍数 * 变异倍数 * 随机倍数
```

### 数值平衡配置 (`数值平衡配置`)
```typescript
{
    血量额外倍数: 10,        // 血量额外倍数
    攻击倍数最小: 2,         // 攻击随机倍数最小值
    攻击倍数最大: 10,        // 攻击随机倍数最大值
    防御倍数最小: 1,         // 防御随机倍数最小值
    防御倍数最大: 5,         // 防御随机倍数最大值
    魔次抵抗系数: 10000,     // 魔次抵抗计算系数
    魔次抵抗上限倍数: 5,     // 魔次抵抗上限倍数
}
```

### TAG生物倍数配置
```typescript
{
    1: 1,       // 基础
    2: 1.8,     // 1.8倍
    3: 3,       // 3倍
    4: 5,       // 5倍
    5: 8,       // 8倍
    6: 30,      // 30倍（大陆BOSS）
    7: 15,      // 15倍（特殊BOSS）
}
```

---

## 🎁 装备掉落系统

### 核心配置文件
**文件位置**: `_核心部分/_装备/装备掉落.ts`

### TAG词条配置 (`TAG词条配置`)

| TAG | 基础词条数 | 魔次几率 | 魔次词条数 | 说明 |
|-----|-----------|----------|-----------|------|
| 1 | 1-4 | 30% | 1-2 | 基础小怪 |
| 2 | 2-5 | 30% | 1-3 | 挑战小怪 |
| 3 | 2-6 | 10% | 1-3 | 稀有怪物 |
| 4 | 3-7 | 100% | 2-4 | 精英怪物(必获得魔次) |
| 5 | 4-8 | 100% | 2-5 | 首领怪物(必获得魔次) |
| 6 | 5-8 | 100% | 3-6 | 大陆BOSS(必获得魔次) |
| 7 | 6-8 | 100% | 3-6 | 特殊BOSS(必获得魔次) |

### 装备颜色系统
根据总词条数决定装备颜色：

| 总词条数 | 装备颜色 |
|---------|---------|
| 10+ | 神话颜色 |
| 8-9 | 传说颜色 |
| 6-7 | 史诗颜色 |
| 5 | 稀有颜色 |
| 3-4 | 优秀颜色 |
| 1-2 | 普通颜色 |

### 基础词条池
```typescript
攻击、魔法、道术、刺术、箭术、武术、血量、防御
```

### 魔次词条池（分3组）
**分组1 - 基础技能** (只能有1条):
- 攻杀剑术、半月弯刀、雷电术、暴风雪
- 灵魂火符、飓风破、暴击术、霜月
- 精准箭术、万箭齐发、罗汉棍法、天雷阵

**分组2 - 职业技能** (只能有1条):
- 天枢、血神、暗影、烈焰、正义、不动、全体

**分组3 - 新职业技能** (可多条但不重复):
- 天枢系: 怒斩、人之怒、地之怒、天之怒、神之怒
- 血神系: 血气献祭、血气燃烧
- 暗影系: 暗影袭杀、暗影剔骨、暗影风暴、暗影附体
- 烈焰系: 火焰追踪、烈焰护甲、爆裂火冢、烈焰突袭
- 正义系: 圣光、行刑、洗礼
- 不动系: 如山、金刚掌

### 装备属性计算
```typescript
基础属性值 = 地图等级 * 随机倍数(0.3-5) * 装备基础 * 基础翻倍 * 地图属性倍数 * 额外随机(0.8-1.5)
魔次属性值 = 地图等级 * 随机倍数(0.2-2) * 基础翻倍 * 分组系数
```

### 数值平衡配置
```typescript
{
    基础属性倍数最小: 1.5,
    基础属性倍数最大: 4.5,
    魔次属性倍数最小: 0.2,
    魔次属性倍数最大: 1.2,
    基础翻倍最小: 50,
    基础翻倍最大: 200,
}
```

---

## ⚙️ 快速修改指南

### 1. 修改地图难度
**文件**: `_核心部分/世界配置.ts`

修改 `完整地图配置` 数组中的对应地图：
```typescript
{
    地图名: '浣熊市',
    地图等级: 100,        // ← 修改这里调整地图等级
    固定星级: 101,        // ← 修改这里调整星级难度
    生物强度倍数: '1',    // ← 修改这里调整生物强度
    装备属性倍数: 1,      // ← 修改这里调整装备属性
}
```

### 2. 修改生物属性
**文件**: `_核心部分/_生物/生物属性.ts`

#### 方法A: 修改基础配置
修改 `生物配置表` 中的对应TAG：
```typescript
[生物类型枚举.基础小怪]: {
    血量基础: '100',      // ← 修改基础血量
    攻击基础: '10',       // ← 修改基础攻击
    防御基础: '5',        // ← 修改基础防御
    装备基础: '1',        // ← 修改装备基础值
}
```

#### 方法B: 修改数值平衡
修改 `数值平衡配置`：
```typescript
{
    血量额外倍数: 10,        // ← 调整血量倍数
    攻击倍数最小: 2,         // ← 调整攻击最小倍数
    攻击倍数最大: 10,        // ← 调整攻击最大倍数
}
```

#### 方法C: 修改TAG倍数
修改 `TAG生物倍数`：
```typescript
{
    1: 1,       // ← 调整TAG1倍数
    2: 1.8,     // ← 调整TAG2倍数
    3: 3,       // ← 调整TAG3倍数
}
```

### 3. 修改装备掉落
**文件**: `_核心部分/_装备/装备掉落.ts`

#### 修改词条数量
修改 `TAG词条配置`：
```typescript
1: { 
    基础词条: { min: 1, max: 4 },  // ← 调整基础词条数
    魔次几率: 30,                   // ← 调整魔次几率(%)
    魔次词条: { min: 1, max: 2 }    // ← 调整魔次词条数
}
```

#### 修改装备属性倍数
修改 `数值平衡配置`：
```typescript
{
    基础属性倍数最小: 1.5,   // ← 调整基础属性最小倍数
    基础属性倍数最大: 4.5,   // ← 调整基础属性最大倍数
    魔次属性倍数最小: 0.2,   // ← 调整魔次最小倍数
    魔次属性倍数最大: 1.2,   // ← 调整魔次最大倍数
}
```

### 4. 批量调整所有地图难度
**推荐方法**: 修改锚点系统的计算公式

在 `世界配置.ts` 的 `计算锚点` 函数中：
```typescript
export function 计算锚点(地图等级: number, 难度倍数: number = 1) {
    // 修改这里的公式可以影响所有地图
    let 生物强度倍数 = 智能计算('2', String(实际锚点 - 1), 7)
    
    // 例如: 全局提高2倍难度
    生物强度倍数 = 智能计算(生物强度倍数, '2', 3)
    
    return { 锚点等级, 生物强度倍数, 装备等级基础 }
}
```

### 5. 修改装备掉落地图属性倍数
在 `世界配置.ts` 的 `完整地图配置` 中：
```typescript
{
    地图名: '浣熊市',
    装备属性倍数: 1,  // ← 修改这个值，影响该地图掉落装备的属性
}
```

---

## 📊 配置关系图

```
地图配置 (世界配置.ts)
    ↓
    ├─→ 地图等级 ────→ 生物属性计算
    ├─→ 固定星级 ────→ 星级难度倍数
    ├─→ 生物强度倍数 ─→ 生物属性计算
    └─→ 装备属性倍数 ─→ 装备掉落计算

生物属性 (生物属性.ts)
    ↓
    ├─→ TAG类型 ─────→ 基础属性配置
    ├─→ 数值平衡配置 ─→ 属性倍数范围
    └─→ TAG生物倍数 ──→ 最终属性计算

装备掉落 (装备掉落.ts)
    ↓
    ├─→ TAG词条配置 ──→ 词条数量
    ├─→ 数值平衡配置 ─→ 属性倍数范围
    └─→ 地图等级 ─────→ 属性基础值
```

---

## 🎯 常见调整场景

### 场景1: 提高某个地图的整体难度
1. 修改 `世界配置.ts` 中该地图的 `地图等级`
2. 或修改 `生物强度倍数`
3. 或修改 `固定星级`

### 场景2: 提高某类怪物的难度
1. 修改 `生物属性.ts` 中对应TAG的基础属性
2. 或修改 `TAG生物倍数` 中对应TAG的倍数

### 场景3: 提高装备掉落质量
1. 修改 `装备掉落.ts` 中的 `TAG词条配置`，增加词条数量
2. 或修改 `数值平衡配置`，提高属性倍数
3. 或修改 `世界配置.ts` 中的 `装备属性倍数`

### 场景4: 全局难度调整
1. 修改 `世界配置.ts` 中的 `计算锚点` 函数
2. 或修改 `生物属性.ts` 中的 `数值平衡配置`

---

## 📝 注意事项

1. **大数值计算**: 所有数值计算都使用 `智能计算` 函数，支持超大数值
2. **配置同步**: 修改配置后需要重启服务器或重新加载脚本
3. **平衡性**: 建议小幅度调整，避免数值失衡
4. **测试**: 修改后建议在测试服务器验证效果
5. **备份**: 修改前建议备份原始配置文件

---

生成时间: ${new Date().toLocaleString('zh-CN')}
